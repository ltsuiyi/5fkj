
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>layuiAdmin 网站用户 iframe 框</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="__layuiadmin__/layui/css/layui.css" media="all">
</head>
<style>
    .layui-form-item .layui-input-block {
        width: 400px;
    }
</style>
<body>

<div class="layui-form" lay-filter="layuiadmin-form-useradmin" id="layuiadmin-form-useradmin" style="padding: 20px 0 0 0;">
    <form action="" class="layui-form">
        <div class="layui-form-item">
            <label class="layui-form-label">上级菜单</label>
            <div class="layui-input-block">
                <select name="pid" lay-verify="" lay-search>
                    <option value="0">顶级菜单</option>
                    {volist name="info" id="info"}
                    <option value="{$info.id}">{$info.title_show}{$info.title}</option>
                   {/volist}
                </select>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">菜单名称</label>
            <div class="layui-input-block input-custom-width">
                <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请输入菜单名称" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">地址：<!--<br><span class="nowrap color-desc">允许类型</span>--></label>
            <div class="layui-input-block input-custom-width" style="">
                <input type="text" name="name" value="" placeholder="请求地址" lay-verify="" lay-vertype="tips" lay-reqtext="请求地址" autocomplete="off" class="layui-input ">
                <p class="help-block">格式例如：AuthRule/index（控制器名/方法名）</p>
            </div>

        </div>
        <div class="layui-form-item">
            <label  class="layui-form-label">菜单图标</label>
            <div class="layui-input-block">
                <input type="text" name="icon" id="iconHhysFa" lay-filter="" class="hide">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label label-required-next">菜单排序</label>
            <div class="layui-input-inline input-custom-width">
                <input type="number" name="sort"  value="0"   placeholder="排序" lay-verify="" lay-verType="tips" lay-reqText="排序"  autocomplete="off"  class="layui-input">
                <p class="help-block">数字越大越靠前</p>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label label-required-next">是否菜单</label>
            <div class="layui-input-inline input-custom-width">
                <input type="radio" name="type" value="1" title="菜单" lay-filter=""  checked>
                <input type="radio" name="type" value="2" title="按钮" lay-filter="" >
            </div>

        </div>
        <div class="layui-form-item layui-layout-admin " style="width: 100%">
            <div class="layui-input-block">
                <div class="layui-footer" style="left: 0px;text-align: center;">
                    <input type="button" lay-submit lay-filter="LAY-user-front-submit" id="LAY-user-front-submit" value="提交" class="layui-btn">
                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                </div>
            </div>
        </div>
    </form>
</div>


{include file="public/footer"}
<script>
    $("#LAY-user-front-submit").click(function(){

        $.ajax({
            url:"{:url('addRule')}",  //这里跳到后台控制器
            data: $('form').serialize(),
            type:"POST",
            success: function(data){
                if (data.code==1) {
                    layer.msg(data.msg,{time:1000,icon: 1},function(){
                        window.parent.location.reload();
                        parent.layer.close(index);     //添加成功之后销毁当前弹窗
                    })
                }else{
                    layer.msg(data.msg,{time:2000,icon: data.status});
                }
            }
        });
    });
</script>
<script>
    layui.config({
        base: '__layuiadmin__'
    }).extend({
        iconHhysFa: '/layui/lay/modules/iconHhysFa'
    });
</script>
<script>
    layui.use(['iconHhysFa', 'form', 'layer'], function() {
        var iconHhysFa = layui.iconHhysFa,
            form = layui.form,
            layer = layui.layer,
            $ = layui.$;

        iconHhysFa.render({
            // 选择器，推荐使用input
            elem: '#iconHhysFa',
            // 数据类型：fontClass/awesome，推荐使用fontClass
            type: 'fontClass',
            // 是否开启搜索：true/false，默认true
            search: true,
            // 是否开启分页：true/false，默认true
            page: false,
            // 每页显示数量，默认12
            limit: 12,
            url: '',
            // 点击回调
            click: function(data) {
                console.log(data);
            },
            // 渲染成功后的回调
            success: function(d) {
                console.log(d);
            }
        });
    });
</script>
</body>
</html>